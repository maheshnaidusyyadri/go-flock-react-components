"use strict";const i=require("./index-CTh2NWFU.cjs");var P=e=>e.type==="checkbox",j=e=>e instanceof Date,S=e=>e==null;const w=e=>typeof e=="object";var g=e=>!S(e)&&!Array.isArray(e)&&w(e)&&!j(e),B=e=>g(e)&&e.target?P(e.target)?e.target.checked:e.target.value:e,T=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,U=(e,s)=>e.has(T(s)),D=e=>{const s=e.constructor&&e.constructor.prototype;return g(s)&&s.hasOwnProperty("isPrototypeOf")},L=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function V(e){let s;const t=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(L&&(e instanceof Blob||n))&&(t||g(e)))if(s=t?[]:{},!t&&!D(e))s=e;else for(const r in e)e.hasOwnProperty(r)&&(s[r]=V(e[r]));else return e;return s}var x=e=>Array.isArray(e)?e.filter(Boolean):[],p=e=>e===void 0,l=(e,s,t)=>{if(!s||!g(e))return t;const n=x(s.split(/[,[\].]+?/)).reduce((r,o)=>S(r)?r:r[o],e);return p(n)||n===e?p(e[s])?t:e[s]:n},R=e=>typeof e=="boolean",M=e=>/^\w*$/.test(e),I=e=>x(e.replace(/["|']|\]/g,"").split(/\.|\[/)),F=(e,s,t)=>{let n=-1;const r=M(s)?[s]:I(s),o=r.length,u=o-1;for(;++n<o;){const c=r[n];let a=t;if(n!==u){const f=e[c];a=g(f)||Array.isArray(f)?f:isNaN(+r[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=a,e=e[c]}return e};const A={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},O={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},W=i.React.createContext(null),v=()=>i.React.useContext(W);var H=(e,s,t,n=!0)=>{const r={defaultValues:s._defaultValues};for(const o in e)Object.defineProperty(r,o,{get:()=>{const u=o;return s._proxyFormState[u]!==O.all&&(s._proxyFormState[u]=!n||O.all),t&&(t[u]=!0),e[u]}});return r},N=e=>g(e)&&!Object.keys(e).length,G=(e,s,t,n)=>{t(e);const{name:r,...o}=e;return N(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(u=>s[u]===!n)},$=e=>Array.isArray(e)?e:[e],C=(e,s,t)=>!e||!s||e===s||$(e).some(n=>n&&(t?n===s:n.startsWith(s)||s.startsWith(n)));function E(e){const s=i.React.useRef(e);s.current=e,i.React.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function q(e){const s=v(),{control:t=s.control,disabled:n,name:r,exact:o}=e||{},[u,c]=i.React.useState(t._formState),a=i.React.useRef(!0),f=i.React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),y=i.React.useRef(r);return y.current=r,E({disabled:n,next:_=>a.current&&C(y.current,_.name,o)&&G(_,f.current,t._updateFormState)&&c({...t._formState,..._}),subject:t._subjects.state}),i.React.useEffect(()=>(a.current=!0,f.current.isValid&&t._updateValid(!0),()=>{a.current=!1}),[t]),i.React.useMemo(()=>H(u,t,f.current,!1),[u,t])}var K=e=>typeof e=="string",z=(e,s,t,n,r)=>K(e)?l(t,e,r):Array.isArray(e)?e.map(o=>l(t,o)):t;function J(e){const s=v(),{control:t=s.control,name:n,defaultValue:r,disabled:o,exact:u}=e||{},c=i.React.useRef(n);c.current=n,E({disabled:o,subject:t._subjects.values,next:y=>{C(c.current,y.name,u)&&f(V(z(c.current,t._names,y.values||t._formValues,!1,r)))}});const[a,f]=i.React.useState(t._getWatch(n,r));return i.React.useEffect(()=>t._removeUnmounted()),a}function Q(e){const s=v(),{name:t,disabled:n,control:r=s.control,shouldUnregister:o}=e,u=U(r._names.array,t),c=J({control:r,name:t,defaultValue:l(r._formValues,t,l(r._defaultValues,t,e.defaultValue)),exact:!0}),a=q({control:r,name:t,exact:!0}),f=i.React.useRef(r.register(t,{...e.rules,value:c,...R(e.disabled)?{disabled:e.disabled}:{}})),y=i.React.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!l(a.errors,t)},isDirty:{enumerable:!0,get:()=>!!l(a.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!l(a.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!l(a.validatingFields,t)},error:{enumerable:!0,get:()=>l(a.errors,t)}}),[a,t]),_=i.React.useMemo(()=>({name:t,value:c,...R(n)||a.disabled?{disabled:a.disabled||n}:{},onChange:d=>f.current.onChange({target:{value:B(d),name:t},type:A.CHANGE}),onBlur:()=>f.current.onBlur({target:{value:l(r._formValues,t),name:t},type:A.BLUR}),ref:d=>{const m=l(r._fields,t);m&&d&&(m._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:b=>d.setCustomValidity(b),reportValidity:()=>d.reportValidity()})}}),[t,r._formValues,n,a.disabled,c,r._fields]);return i.React.useEffect(()=>{const d=r._options.shouldUnregister||o,m=(b,k)=>{const h=l(r._fields,b);h&&h._f&&(h._f.mount=k)};if(m(t,!0),d){const b=V(l(r._options.defaultValues,t));F(r._defaultValues,t,b),p(l(r._formValues,t))&&F(r._formValues,t,b)}return()=>{(u?d&&!r._state.action:d)?r.unregister(t):m(t,!1)}},[t,r,u,o]),i.React.useEffect(()=>{R(n)&&l(r._fields,t)&&r._updateDisabledField({disabled:n,fields:r._fields,name:t,value:l(r._fields,t)._f.value})},[n,t,r]),i.React.useMemo(()=>({field:_,formState:a,fieldState:y}),[_,a,y])}const X=e=>e.render(Q(e));exports.Controller=X;
//# sourceMappingURL=index.esm-B8sTTAcS.cjs.map
